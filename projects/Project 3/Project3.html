<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>repl.it</title>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    


</head>


<body>
    
</body>
    <canvas id="canvas1" width="600" height="400" style="border:1px solid blue;"></canvas>
    
    <script>
        var canvas = document.getElementById("canvas1");
        var ctx = canvas.getContext("2d");

        
        
        var width = 600;
        var height = 400;
        var player = {
            x: width/2,
            y: height-15
        }
        
        var color = "blue";
        function createPlayer(color){
            //var c = document.getElementById("canvas");
            ctx.rect(player.x, player.y, 20, 20);
            ctx.fillStyle = color;
            ctx.fill();
            
            requestAnimationFrame(createPlayer);
            //ctx.stroke();
        }
        createPlayer();

        var keydown;
        $(document).keydown(function(e) {
            switch(e.which) {
                case 38: // up
                    console.log("it worked");
                    player.x +=3;
                    player.y -=3;
                    requestAnimationFrame(function() {
                    keydown.function(e);
                    }) 
                    break;
                case 39:
                    
            }
            (function() {
            var requestAnimationFrame = window.requestAnimationFrame || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame || window.msRequestAnimationFrame;
            window.requestAnimationFrame = requestAnimationFrame;})
        })
        /*
        document.onkeydown = function(e){
            console.log("It worked");
            if (e.keycode == 39){
                console.log("Did it worked");
                player.x += 3;
                player.y -= 3;
                createPlayer();
            }
                
        };

        (function() {
            var requestAnimationFrame = window.requestAnimationFrame || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame || window.msRequestAnimationFrame;
            window.requestAnimationFrame = requestAnimationFrame;
        })();
        */
    
    </script>
    

</html>